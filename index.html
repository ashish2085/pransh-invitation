<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Annaprashan Ceremony of Pransh</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;700&family=Tangerine:wght@700&family=Marcellus&family=Noto+Sans+Devanagari:wght@400;700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Inter', sans-serif;
            background-image: url('https://www.toptal.com/designers/subtlepatterns/uploads/watercolor.png');
            background-size: cover;
            background-position: center;
            background-attachment: fixed;
            overflow-x: hidden; /* Allow vertical scroll, hide horizontal */
        }
        .font-tangerine {
            font-family: 'Tangerine', cursive;
        }
        .font-marcellus {
            font-family: 'Marcellus', serif;
        }
        .font-hindi {
            font-family: 'Noto Sans Devanagari', sans-serif;
        }
        .card-bg {
            background-color: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(10px);
            -webkit-backdrop-filter: blur(10px);
            position: relative;
            background-image: url("data:image/svg+xml,%3Csvg width='84' height='48' viewBox='0 0 84 48' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M0 0h12v12H0V0zm24 0h12v12H24V0zm24 0h12v12H48V0zm24 0h12v12H72V0zM12 12h12v12H12V12zm24 0h12v12H36V12zm24 0h12v12H60V12zm24 0h12v12H84V12zm-60 12h12v12H24V24zm24 0h12v12H48V24zm24 0h12v12H72V24zM12 36h12v12H12V36zm24 0h12v12H36V36zm24 0h12v12H60V36zm24 0h12v12H84V36z' fill='%23D2B48C' fill-opacity='0.05' fill-rule='evenodd'/%3E%3C/svg%3E");
        }
        .countdown-box {
            background: rgba(255, 255, 255, 0.7);
            border: 1px solid rgba(210, 180, 140, 0.3);
        }
        /* Modal styles */
        #blessingModal, #entryModal {
            transition: opacity 0.3s ease;
        }
        .modal-content {
            transition: transform 0.3s ease;
        }
        .hidden-fade {
            opacity: 0;
            visibility: hidden;
            transition: opacity 0.5s ease-in-out, visibility 0.5s;
        }
        .visible-fade {
            opacity: 1;
            visibility: visible;
        }
        
        /* Animation Keyframes */
        @keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }
        @keyframes slideUp { from { transform: translateY(20px); opacity: 0; } to { transform: translateY(0); opacity: 1; } }
        @keyframes scaleIn { from { transform: scale(0.95); opacity: 0; } to { transform: scale(1); opacity: 1; } }
        @keyframes letterReveal {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }
        @keyframes gentlePulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.03); }
        }

        /* Animation Utility Classes */
        .animate-on-load {
            opacity: 0; /* Start hidden */
        }
        .animate-slide-up { animation: slideUp 0.8s cubic-bezier(0.25, 0.46, 0.45, 0.94) forwards; }
        .animate-scale-in { animation: scaleIn 0.8s cubic-bezier(0.25, 0.46, 0.45, 0.94) forwards; }
        .animate-fade-in { animation: fadeIn 1s ease-out forwards; }
        .animate-pulse-gentle { animation: gentlePulse 5s ease-in-out infinite; }
        
        /* Letter animation styling */
        .letter-anim span {
            display: inline-block;
            opacity: 0;
            animation: letterReveal 0.5s forwards;
        }

        /* Petal Animation */
        .petal {
            position: absolute;
            background-image: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="%23ffb6c1"><path d="M10 3.22l-.61-.6a5.5 5.5 0 00-7.78 7.77L10 18.78l8.39-8.4a5.5 5.5 0 00-7.78-7.77l-.61.61z" /></svg>');
            background-size: contain;
            background-repeat: no-repeat;
            width: 20px;
            height: 20px;
            top: -20px;
            animation: fall linear infinite;
            opacity: 0.7;
        }
        @keyframes fall {
            to {
                transform: translateY(100vh) rotate(360deg);
                opacity: 0;
            }
        }
    </style>
</head>
<body class="flex items-center justify-center min-h-screen p-4 sm:p-6 lg:p-8">
    
    <div id="petal-container"></div>

    <!-- Entry Modal -->
    <div id="entryModal" class="fixed inset-0 bg-amber-800 bg-opacity-90 flex items-center justify-center p-4 z-50 cursor-pointer">
        <div class="text-center text-white">
            <h2 class="font-tangerine text-6xl mb-2">You're Invited</h2>
            <p class="font-marcellus text-xl mb-6">to the Annaprashan of Pransh</p>
            <button id="enterBtn" class="bg-white text-amber-800 font-bold py-3 px-8 rounded-lg hover:bg-amber-100 transition duration-300 shadow-lg animate-pulse">
                Click to Enter
            </button>
        </div>
    </div>

    <!-- Main Invitation Card -->
    <div id="mainContent" class="card-bg w-full max-w-2xl mx-auto rounded-2xl shadow-2xl border-4 border-amber-800/50 overflow-hidden hidden-fade">
        
        <!-- Controls -->
        <div class="absolute top-4 right-4 z-10 flex gap-2">
            <!-- Language Toggle -->
            <button id="langToggleBtn" class="w-12 h-12 bg-amber-800/80 text-white rounded-full flex items-center justify-center shadow-lg hover:bg-amber-900 transition-transform hover:scale-110 focus:outline-none focus:ring-2 focus:ring-amber-500 font-bold text-sm">EN</button>
            <!-- Mute Button -->
            <button id="muteBtn" class="w-12 h-12 bg-amber-800/80 text-white rounded-full flex items-center justify-center shadow-lg hover:bg-amber-900 transition-transform hover:scale-110 focus:outline-none focus:ring-2 focus:ring-amber-500">
                <svg id="unmuteIcon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polygon points="11 5 6 9 2 9 2 15 6 15 11 19 11 5"></polygon><path d="M19.07 4.93a10 10 0 0 1 0 14.14M15.54 8.46a5 5 0 0 1 0 7.07"></path></svg>
                <svg id="muteIcon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="hidden"><polygon points="11 5 6 9 2 9 2 15 6 15 11 19 11 5"></polygon><line x1="23" y1="9" x2="17" y2="15"></line><line x1="17" y1="9" x2="23" y2="15"></line></svg>
            </button>
        </div>

        <div class="p-8 sm:p-12 text-center text-amber-900">

            <!-- Header -->
            <header class="mb-6 animate-on-load">
                <p class="font-marcellus text-xl tracking-wider" data-lang-en="Join us for the" data-lang-hi="हमारे इस खुशी के अवसर पर शामिल हों">Join us for the</p>
                <h1 id="title-annaprashan" class="font-tangerine text-6xl sm:text-7xl font-bold text-amber-800 my-2 letter-anim" data-lang-en="Annaprashan" data-lang-hi="अन्नप्राशन">Annaprashan</h1>
                <p class="font-marcellus text-xl tracking-wider" data-lang-en="of our beloved son" data-lang-hi="हमारे प्यारे बेटे के">of our beloved son</p>
            </header>

            <!-- Image of Yashoda and Krishna -->
            <div class="my-8 animate-on-load">
                <img src="https://i.pinimg.com/1200x/53/83/29/538329beb3a6ac9bb41d610e6267f76b.jpg" alt="Yashoda feeding Krishna" class="rounded-full w-48 h-48 mx-auto object-cover shadow-lg border-4 border-amber-200 animate-pulse-gentle" onerror="this.onerror=null; this.src='https://placehold.co/192x192/FFF8E1/D2B48C?text=Pransh';">
            </div>

            <!-- Child's Name -->
            <div class="mt-6 mb-8 animate-on-load">
                <h2 id="title-pransh" class="font-tangerine text-8xl sm:text-9xl font-bold text-amber-700 letter-anim" data-lang-en="Pransh" data-lang-hi="प्रांश">Pransh</h2>
            </div>

            <!-- Invitation Message -->
            <p class="font-marcellus max-w-md mx-auto text-lg leading-relaxed animate-on-load" data-lang-en="We invite you to share our joy and bless our little one as he takes his first bite of solid food." data-lang-hi="हम आपको हमारी खुशी साझा करने और हमारे नन्हे-मुन्ने को आशीर्वाद देने के लिए आमंत्रित करते हैं क्योंकि वह अपना पहला ठोस भोजन ग्रहण कर रहा है।">
                We invite you to share our joy and bless our little one as he takes his first bite of solid food.
            </p>

            <!-- Event Details Section -->
            <div class="mt-10 border-t-2 border-dashed border-amber-800/30 pt-8 animate-on-load">
                <div class="grid grid-cols-1 md:grid-cols-2 gap-8 items-start">
                    <!-- Date & Time -->
                    <div class="text-left">
                        <h3 class="font-marcellus text-2xl font-bold mb-4 flex items-center" data-lang-en="Date & Time" data-lang-hi="दिनांक और समय">
                            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="mr-3 text-amber-800"><rect x="3" y="4" width="18" height="18" rx="2" ry="2"></rect><line x1="16" y1="2" x2="16" y2="6"></line><line x1="8" y1="2" x2="8" y2="6"></line><line x1="3" y1="10" x2="21" y2="10"></line></svg>
                            <span class="lang-switch">Date & Time</span>
                        </h3>
                        <p class="text-lg ml-9 font-marcellus" data-lang-en="<strong>September 10, 2025</strong>" data-lang-hi="<strong>10 सितंबर, 2025</strong>"><strong>September 10, 2025</strong></p>
                        <p class="text-md ml-9 font-marcellus" data-lang-en="11:00 AM onwards" data-lang-hi="सुबह 11:00 बजे से">11:00 AM onwards</p>
                    </div>
                    <!-- Venue -->
                    <div class="text-left">
                        <h3 class="font-marcellus text-2xl font-bold mb-4 flex items-center" data-lang-en="Venue" data-lang-hi="स्थान">
                             <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="mr-3 text-amber-800"><path d="M21 10c0 7-9 13-9 13s-9-6-9-13a9 9 0 0 1 18 0z"></path><circle cx="12" cy="10" r="3"></circle></svg>
                             <span class="lang-switch">Venue</span>
                        </h3>
                        <p class="text-lg ml-9 font-marcellus" data-lang-en="<strong>Manorama Marriage Hall</strong>" data-lang-hi="<strong>मनोरमा मैरिज हॉल</strong>"><strong>Manorama Marriage Hall</strong></p>
                        <p class="text-md ml-9 font-marcellus" data-lang-en="G.T Road Kulti, Near Kulti College Bus Stand, Kulti - 713343" data-lang-hi="जी.टी. रोड कुल्टी, कुल्टी कॉलेज बस स्टैंड के पास, कुल्टी - 713343">G.T Road Kulti, Near Kulti College Bus Stand, Kulti - 713343</p>
                    </div>
                </div>
            </div>

            <!-- Dress Code -->
            <div class="mt-8 text-center animate-on-load">
                <h3 class="font-marcellus text-2xl font-bold mb-4 flex items-center justify-center" data-lang-en="Dress Code" data-lang-hi="ड्रेस कोड">
                    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="mr-3 text-amber-800"><path d="m21.21 15.89-1.21-7.2 1.42-1.42a2 2 0 0 0 0-2.82l-1.17-1.17a2 2 0 0 0-2.82 0L16 4.71l-7.2-1.21a.5.5 0 0 0-.57.57l1.21 7.2-1.42 1.42a2 2 0 0 0 0 2.82l1.17 1.17a2 2 0 0 0 2.82 0L15.89 15l7.2 1.21a.5.5 0 0 0 .57-.57z"></path><path d="m11 4-2 2"></path><path d="m20 13-2 2"></path><path d="m5 19-2 2"></path></svg>
                    <span class="lang-switch">Dress Code</span>
                </h3>
                <p class="text-lg font-marcellus" data-lang-en="Traditional or Smart Casual" data-lang-hi="पारंपरिक या स्मार्ट कैजुअल">Traditional or Smart Casual</p>
                <p class="text-md font-marcellus" data-lang-en="Bright colors welcome, please avoid black attire" data-lang-hi="चमकीले रंगों का स्वागत है, काले परिधान से बचें">Bright colors welcome, please avoid black attire</p>
            </div>

            <!-- Traditional Blessing -->
            <div class="mt-10 border-t-2 border-dashed border-amber-800/30 pt-8 animate-on-load">
                 <p class="font-marcellus max-w-lg mx-auto text-md italic leading-relaxed">
                    "Annam Brahma, Raso Vishnu, Bhokta Devo Maheshwarah. Evam Jnatwaa Tu Bhoktavyam Annam Dosh Niwaram."
                </p>
                <p class="font-marcellus max-w-lg mx-auto text-md leading-relaxed mt-4" data-lang-en="Just as Mother Yashoda lovingly nourished baby Krishna, we celebrate this sacred moment when our precious child receives their first taste of kheer, blessed by divine grace and surrounded by the abundance of traditional foods and the love of family." data-lang-hi="जैसे माता यशोदा ने बाल कृष्ण को प्यार से पोषित किया, वैसे ही हम इस पवित्र क्षण का जश्न मनाते हैं जब हमारा अनमोल बच्चा दिव्य कृपा से धन्य और पारंपरिक खाद्य पदार्थों और परिवार के प्यार से घिरा हुआ खीर का अपना पहला स्वाद चखता है।">
                    Just as Mother Yashoda lovingly nourished baby Krishna, we celebrate this sacred moment when our precious child receives their first taste of kheer, blessed by divine grace and surrounded by the abundance of traditional foods and the love of family.
                </p>
            </div>

            <!-- Gemini API Feature: Blessing Generator -->
            <div class="mt-10 border-t-2 border-dashed border-amber-800/30 pt-8 animate-on-load">
                <h3 class="font-marcellus text-2xl font-bold mb-2" data-lang-en="Looking for the right words?" data-lang-hi="सही शब्दों की तलाश में हैं?">Looking for the right words?</h3>
                <p class="font-marcellus max-w-md mx-auto text-md leading-relaxed mb-4" data-lang-en="Let our AI assistant help you craft the perfect blessing for Pransh." data-lang-hi="हमारे एआई सहायक को प्रांश के लिए आदर्श आशीर्वाद तैयार करने में आपकी मदद करने दें।">
                    Let our AI assistant help you craft the perfect blessing for Pransh.
                </p>
                <button id="generateBlessingBtn" class="bg-amber-800 text-white font-bold py-3 px-8 rounded-lg hover:bg-amber-900 transition-transform hover:scale-105 duration-300 shadow-md" data-lang-en="✨ Generate a Blessing" data-lang-hi="✨ आशीर्वाद उत्पन्न करें">
                    ✨ Generate a Blessing
                </button>
            </div>

            <!-- Countdown Timer -->
            <div id="countdown" class="mt-10 grid grid-cols-4 gap-2 sm:gap-4 text-amber-800 animate-on-load">
                <div class="countdown-box p-4 rounded-lg"><div id="days" class="text-3xl sm:text-4xl font-bold">00</div><div class="text-xs sm:text-sm font-marcellus" data-lang-en="Days" data-lang-hi="दिन">Days</div></div>
                <div class="countdown-box p-4 rounded-lg"><div id="hours" class="text-3xl sm:text-4xl font-bold">00</div><div class="text-xs sm:text-sm font-marcellus" data-lang-en="Hours" data-lang-hi="घंटे">Hours</div></div>
                <div class="countdown-box p-4 rounded-lg"><div id="minutes" class="text-3xl sm:text-4xl font-bold">00</div><div class="text-xs sm:text-sm font-marcellus" data-lang-en="Minutes" data-lang-hi="मिनट">Minutes</div></div>
                <div class="countdown-box p-4 rounded-lg"><div id="seconds" class="text-3xl sm:text-4xl font-bold">00</div><div class="text-xs sm:text-sm font-marcellus" data-lang-en="Seconds" data-lang-hi="सेकंड">Seconds</div></div>
            </div>
             <div id="eventPassed" class="hidden mt-10 text-xl font-marcellus text-amber-800" data-lang-en="The auspicious day has arrived!" data-lang-hi="शुभ दिन आ गया है!">The auspicious day has arrived!</div>


            <!-- Action Buttons -->
            <div class="mt-10 flex flex-col sm:flex-row justify-center gap-4 animate-on-load">
                <a id="addToCalendar" href="#" target="_blank" class="inline-block bg-amber-800 text-white font-bold py-3 px-8 rounded-lg hover:bg-amber-900 transition-transform hover:scale-105 duration-300 shadow-md font-marcellus" data-lang-en="Add to Calendar" data-lang-hi="कैलेंडर में जोड़ें">Add to Calendar</a>
                <a href="https://www.google.com/maps?q=Manorama+Marriage+Hall,G.T+Road+Kulti,Kulti" target="_blank" class="inline-block bg-gray-200 text-amber-800 font-bold py-3 px-8 rounded-lg hover:bg-gray-300 transition-transform hover:scale-105 duration-300 shadow-md font-marcellus" data-lang-en="View on Map" data-lang-hi="नक्शे पर देखें">View on Map</a>
            </div>

        </div>

        <!-- Footer -->
        <footer class="bg-amber-800/10 p-6 text-center animate-on-load">
            <p class="font-marcellus text-lg" data-lang-en="With love and joy," data-lang-hi="प्यार और खुशी के साथ,">With love and joy,</p>
            <p class="text-xl font-semibold text-amber-800 font-marcellus" data-lang-en="Mrs. Priyanka & Mr. Ashish Kumar" data-lang-hi="श्रीमती प्रियंका एवं श्री आशीष कुमार">Mrs. Priyanka & Mr. Ashish Kumar</p>
            <p class="font-marcellus text-md text-amber-800/80 mt-2" data-lang-en="Contact: +91 7209412085" data-lang-hi="संपर्क: +91 7209412085">Contact: +91 7209412085</p>
        </footer>
    </div>

    <!-- Blessing Modal -->
    <div id="blessingModal" class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50 hidden">
        <div class="bg-white rounded-lg shadow-xl p-8 max-w-md w-full modal-content">
            <h3 class="font-marcellus text-2xl font-bold mb-4 text-amber-800">A Blessing for Pransh</h3>
            <div id="blessingOutput" class="text-lg text-gray-700 mb-6 min-h-[100px]">
                <!-- Loading spinner -->
                <div id="loadingSpinner" class="flex justify-center items-center h-full">
                    <svg class="animate-spin h-8 w-8 text-amber-800" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24"><circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle><path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path></svg>
                </div>
            </div>
            <div class="flex justify-between items-center">
                <button id="copyBlessingBtn" class="bg-gray-200 text-amber-800 font-bold py-2 px-4 rounded-lg hover:bg-gray-300 transition duration-300">Copy</button>
                <div class="flex gap-2">
                    <button id="generateAnotherBtn" class="bg-amber-800 text-white font-bold py-2 px-4 rounded-lg hover:bg-amber-900 transition duration-300">Another</button>
                    <button id="closeModalBtn" class="bg-red-600 text-white font-bold py-2 px-4 rounded-lg hover:bg-red-700 transition duration-300">Close</button>
                </div>
            </div>
            <div id="copyFeedback" class="text-center text-green-600 mt-2 text-sm opacity-0 transition-opacity duration-300">Copied to clipboard!</div>
        </div>
    </div>

    <!-- Audio Player -->
    <audio id="background-music" loop>
        <source src="https://raw.githubusercontent.com/ashish2085/pransh-invitation/main/krishnaflu-pa2luqdy-37180.mp3" type="audio/mpeg">
        Your browser does not support the audio element.
    </audio>


    <script>
        window.addEventListener('load', () => {
            // --- ELEMENTS ---
            const entryModal = document.getElementById('entryModal');
            const enterBtn = document.getElementById('enterBtn');
            const mainContent = document.getElementById('mainContent');
            const backgroundMusic = document.getElementById('background-music');
            const muteBtn = document.getElementById('muteBtn');
            const unmuteIcon = document.getElementById('unmuteIcon');
            const muteIcon = document.getElementById('muteIcon');
            const langToggleBtn = document.getElementById('langToggleBtn');

            let currentLang = 'en';

            // --- COUNTDOWN TIMER LOGIC ---
            const countdownDate = new Date("September 10, 2025 11:00:00").getTime();
            const countdownFunction = setInterval(() => {
                const now = new Date().getTime();
                const distance = countdownDate - now;
                if (distance > 0) {
                    document.getElementById("days").innerText = Math.floor(distance / (1000 * 60 * 60 * 24)).toString().padStart(2, '0');
                    document.getElementById("hours").innerText = Math.floor((distance % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60)).toString().padStart(2, '0');
                    document.getElementById("minutes").innerText = Math.floor((distance % (1000 * 60 * 60)) / (1000 * 60)).toString().padStart(2, '0');
                    document.getElementById("seconds").innerText = Math.floor((distance % (1000 * 60)) / 1000).toString().padStart(2, '0');
                } else {
                    clearInterval(countdownFunction);
                    document.getElementById("countdown").classList.add('hidden');
                    document.getElementById("eventPassed").classList.remove('hidden');
                }
            }, 1000);

            // --- ADD TO CALENDAR LOGIC ---
            function generateCalendarLink() {
                const title = encodeURIComponent("Annaprashan of Pransh");
                const startTime = "20250910T053000Z";
                const endTime = "20250910T093000Z";
                const details = encodeURIComponent("Celebrating the rice-feeding ceremony of Pransh, son of Mrs. Priyanka and Mr. Ashish Kumar.");
                const location = encodeURIComponent("Manorama Marriage Hall, G.T Road Kulti, Near Kulti College Bus Stand, Kulti 713343");
                const googleCalendarUrl = `https://www.google.com/calendar/render?action=TEMPLATE&text=${title}&dates=${startTime}/${endTime}&details=${details}&location=${location}`;
                document.getElementById('addToCalendar').href = googleCalendarUrl;
            }
            generateCalendarLink();

            // --- GEMINI API BLESSING GENERATOR ---
            const generateBlessingBtn = document.getElementById('generateBlessingBtn');
            const blessingModal = document.getElementById('blessingModal');
            const closeModalBtn = document.getElementById('closeModalBtn');
            const blessingOutput = document.getElementById('blessingOutput');
            const loadingSpinner = document.getElementById('loadingSpinner');
            const copyBlessingBtn = document.getElementById('copyBlessingBtn');
            const generateAnotherBtn = document.getElementById('generateAnotherBtn');
            const copyFeedback = document.getElementById('copyFeedback');
            const modalContent = blessingModal ? blessingModal.querySelector('.modal-content') : null;

            async function fetchBlessing() {
                if (!blessingOutput || !loadingSpinner) return;
                blessingOutput.innerHTML = '';
                loadingSpinner.style.display = 'flex';
                blessingOutput.appendChild(loadingSpinner);
                const prompt = "Generate a short, warm, and heartfelt blessing (around 30-50 words) for a baby boy named Pransh on his Annaprashan (first rice-eating ceremony). The tone should be joyous and auspicious.";
                try {
                    // NOTE: This requires a valid API key to function when deployed.
                    const apiKey = "AIzaSyBqPrWge3ac8H7wwlLFIxbcs945odoNPik"; // The environment will handle the key.
                    const apiUrl = `https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-preview-05-20:generateContent?key=${apiKey}`;
                    const response = await fetch(apiUrl, { method: 'POST', headers: { 'Content-Type': 'application/json' }, body: JSON.stringify({ contents: [{ parts: [{ text: prompt }] }] }) });
                    if (!response.ok) throw new Error(`API request failed with status ${response.status}`);
                    const result = await response.json();
                    let blessingText = "May your life be filled with endless joy and delicious adventures. Happy Annaprashan!";
                    if (result.candidates && result.candidates[0]?.content?.parts?.[0]) {
                        blessingText = result.candidates[0].content.parts[0].text;
                    }
                    loadingSpinner.style.display = 'none';
                    blessingOutput.innerText = blessingText;
                } catch (error) {
                    console.error("Error fetching blessing:", error);
                    loadingSpinner.style.display = 'none';
                    blessingOutput.innerText = "Could not generate a blessing at this time. Please try again later.";
                }
            }
            
            generateBlessingBtn.addEventListener('click', () => {
                if (!blessingModal || !modalContent) return;
                blessingModal.classList.remove('hidden');
                document.body.style.overflow = 'hidden';
                blessingModal.style.opacity = '0';
                modalContent.style.transform = 'scale(0.95)';
                setTimeout(() => {
                    blessingModal.style.opacity = '1';
                    modalContent.style.transform = 'scale(1)';
                }, 10);
                fetchBlessing();
            });

            const closeModal = () => {
                if (!blessingModal || !modalContent) return;
                blessingModal.style.opacity = '0';
                modalContent.style.transform = 'scale(0.95)';
                setTimeout(() => {
                    blessingModal.classList.add('hidden');
                    document.body.style.overflow = 'auto';
                }, 300);
            };

            closeModalBtn.addEventListener('click', closeModal);
            generateAnotherBtn.addEventListener('click', fetchBlessing);

            copyBlessingBtn.addEventListener('click', () => {
                if (!blessingOutput) return;
                const textToCopy = blessingOutput.innerText;
                const textArea = document.createElement("textarea");
                textArea.value = textToCopy;
                textArea.style.position = 'fixed';
                textArea.style.top = '0';
                textArea.style.left = '0';
                textArea.style.opacity = '0';
                document.body.appendChild(textArea);
                textArea.focus();
                textArea.select();
                try {
                    document.execCommand('copy');
                    showCopyFeedback();
                } catch (err) {
                    console.error('Fallback: Oops, unable to copy', err);
                }
                document.body.removeChild(textArea);
            });

            function showCopyFeedback() {
                if (!copyFeedback) return;
                copyFeedback.style.opacity = '1';
                setTimeout(() => {
                    copyFeedback.style.opacity = '0';
                }, 2000);
            }

            // --- LETTER ANIMATION FUNCTION ---
            function animateLetters(element) {
                const text = element.innerText;
                element.innerHTML = '';
                text.split('').forEach((char, index) => {
                    const span = document.createElement('span');
                    span.innerText = char;
                    if (char === ' ') {
                        span.innerHTML = '&nbsp;';
                    }
                    span.style.animationDelay = `${index * 0.05}s`;
                    element.appendChild(span);
                });
            }

            // --- LANGUAGE SWITCH LOGIC ---
            function switchLanguage(lang) {
                mainContent.style.transition = 'opacity 0.4s ease-in-out';
                mainContent.style.opacity = '0';

                setTimeout(() => {
                    const elements = document.querySelectorAll('[data-lang-en]');
                    elements.forEach(el => {
                        const text = el.getAttribute(`data-lang-${lang}`);
                        const target = el.querySelector('.lang-switch') || el;
                        target.innerHTML = text;
                        
                        // Handle font switching for specific elements
                        const isTitle = el.id === 'title-annaprashan';
                        const isName = el.id === 'title-pransh';
                        const isFooterName = el.dataset.langEn === "Mrs. Priyanka & Mr. Ashish Kumar";

                        el.classList.remove('font-tangerine', 'font-hindi', 'font-marcellus');
                        
                        if (lang === 'hi') {
                            if (isTitle || isFooterName) {
                                el.classList.add('font-hindi');
                            } else if (isName) {
                                el.classList.add('font-tangerine'); // Pransh stays Tangerine
                            } else {
                                el.classList.add('font-marcellus');
                            }
                        } else { // lang === 'en'
                             if (isTitle) {
                                el.classList.add('font-tangerine');
                            } else if (isName) {
                                el.classList.add('font-tangerine');
                            } else if (isFooterName) {
                                el.classList.add('font-marcellus'); // Back to Marcellus for English
                            } else {
                                el.classList.add('font-marcellus');
                            }
                        }
                    });
                    mainContent.style.opacity = '1';
                }, 400);

                currentLang = lang;
                langToggleBtn.innerText = lang === 'en' ? 'HI' : 'EN';
            }


            langToggleBtn.addEventListener('click', () => {
                switchLanguage(currentLang === 'en' ? 'hi' : 'en');
            });

            // --- ENTRY & ANIMATION LOGIC ---
            enterBtn.addEventListener('click', () => {
                entryModal.style.opacity = '0';
                setTimeout(() => {
                    entryModal.style.display = 'none';
                }, 300);

                mainContent.classList.remove('hidden-fade');
                mainContent.classList.add('visible-fade', 'animate-slide-up');
                
                animateLetters(document.getElementById('title-annaprashan'));
                animateLetters(document.getElementById('title-pransh'));

                const animatedElements = mainContent.querySelectorAll('.animate-on-load');
                animatedElements.forEach((el, index) => {
                    let animationClass = 'animate-slide-up';
                    if (el.querySelector('img')) {
                         animationClass = 'animate-fade-in';
                    }
                    el.style.animationDelay = `${index * 0.15 + 0.5}s`;
                    el.classList.add(animationClass);
                });

                backgroundMusic.play().catch(error => {
                    console.error("Audio playback failed:", error);
                });

                createPetals();

                // Set timer to switch to Hindi
                setTimeout(() => {
                    switchLanguage('hi');
                }, 20000);
            });
            
            // --- MUTE BUTTON LOGIC ---
            muteBtn.addEventListener('click', () => {
                backgroundMusic.muted = !backgroundMusic.muted;
                muteIcon.classList.toggle('hidden');
                unmuteIcon.classList.toggle('hidden');
            });

            // --- PETAL ANIMATION ---
            function createPetals() {
                const container = document.getElementById('petal-container');
                const petalCount = 20;
                for (let i = 0; i < petalCount; i++) {
                    const petal = document.createElement('div');
                    petal.classList.add('petal');
                    petal.style.left = `${Math.random() * 100}vw`;
                    petal.style.animationDuration = `${Math.random() * 5 + 5}s`;
                    petal.style.animationDelay = `${Math.random() * 5}s`;
                    container.appendChild(petal);
                }
            }
        });
    </script>

</body>
</html>
